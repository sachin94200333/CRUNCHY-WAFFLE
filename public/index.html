<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crunchy Waffle</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white">
    <header class="bg-red-600 text-white py-16 text-center">
        <h1 class="text-6xl font-black italic">CRUNCHY WAFFLE</h1>
    </header>

    <div class="max-w-6xl mx-auto p-8">
        <h2 class="text-3xl font-bold mb-6 border-l-8 border-red-600 pl-4">MENU</h2>
        <div id="waffle-list" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
    </div>

    <div class="bg-gray-100 py-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-10">MEET OUR TEAM</h2>
            <div id="team-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>
            <p id="journey-text" class="mt-10 text-gray-600 italic max-w-2xl mx-auto"></p>
        </div>
    </div>

    <script>
        async function init() {
            // Load Waffles
            const wRes = await fetch('/api/waffles');
            const waffles = await wRes.json();
            document.getElementById('waffle-list').innerHTML = waffles.map(w => `
                <div class="shadow-lg rounded-lg overflow-hidden border">
                    <img src="${w.image}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-xl">${w.name}</h3>
                        <p class="text-red-600 font-black text-lg">â‚¹${w.price}</p>
                    </div>
                </div>`).join('');

            // Load About (Fixing Undefined)
            const aRes = await fetch('/api/about');
            const data = await aRes.json();
            
            const teamHtml = [
                { n: data.ceoName, p: data.ceoPhoto, r: 'Founder & CEO' },
                { n: data.tm1Name, p: data.tm1Photo, r: 'Head Chef' },
                { n: data.tm2Name, p: data.tm2Photo, r: 'Manager' }
            ].map(m => `
                <div>
                    <img src="${m.p || 'https://via.placeholder.com/150'}" class="w-32 h-32 rounded-full mx-auto object-cover border-4 border-red-600">
                    <h4 class="font-bold mt-4">${m.n || 'Coming Soon'}</h4>
                    <p class="text-sm text-gray-500">${m.r}</p>
                </div>`).join('');

            document.getElementById('team-grid').innerHTML = teamHtml;
            document.getElementById('journey-text').innerText = data.journey || "Welcome to Crunchy Waffle!";
        }
        init();
    </script>
</body>
</html>